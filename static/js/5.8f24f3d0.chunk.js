(this["webpackJsonpjuggling-graph"]=this["webpackJsonpjuggling-graph"]||[]).push([[5],{267:function(e,t,a){},401:function(e,t,a){"use strict";a.r(t);var n=a(15),l=a(16),r=a(18),i=a(17),o=a(19),s=a(0),c=a.n(s),u=a(397),d=a(403),m=a(402),p=a(406),g=a(398),h=a(400),b=a(408),f=a(6),y=a(204),v=(a(205),a(129)),D=a.n(v),x=(a(128),function(e){var t=e.date,a=e.setDate;return c.a.createElement("div",null,c.a.createElement(D.a,{className:"br3 pl2 blue bg-light-gray",selected:t,onChange:function(e){return a(e)}}))});x.defaultProps={date:new Date,setDate:null};var E=x,S=(a(267),a(8)),k=a.n(S),w=JSON.parse(localStorage.getItem("guest")),N=JSON.parse(localStorage.getItem("sandbox")),j=function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(i.a)(t).call(this))).submitData=function(t){var a=e.props.updateDailyData;t.preventDefault();var n=parseInt(t.target[0].value,10);t.target.reset(),a(n)},e.undoData=function(t){var a=e.props.deletePopup;t.preventDefault(),a()},e.state={loginState:""},e}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){w?this.setState({loginState:"(disabled as guest)"}):N&&this.setState({loginState:"(sandbox)"}),this.forceUpdate()}},{key:"render",value:function(){var e=this.state.loginState;return(c.a.createElement("div",null,c.a.createElement("form",{onSubmit:this.submitData},c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("input",{className:"f6 mb2 input-reset fl black-80 pa3 lh-solid w-100 w-75-m w-80-l br3 b--black ".concat(w?"bg-moon-gray":"bg-white"),style:{outline:"none"},type:"number",placeholder:"Number of catches ".concat(e),disabled:w||null})),c.a.createElement("div",null,c.a.createElement("input",{className:"f6 button-reset pv3 tc bn bg-green hover-bg-dark-green white w-50 w-25-m w-20-l br3 ".concat(w?null:"pointer"),style:{outline:"none"},type:"submit",value:"Add",disabled:w||null})))),c.a.createElement("form",{onSubmit:this.undoData},c.a.createElement("div",{className:"mt3"},c.a.createElement("input",{className:"f6 button-reset pv3 tc bn bg-red hover-bg-dark-red white w-50 w-25-m w-20-l br3 ".concat(w?null:"pointer"),onKeyPress:function(e){e.preventDefault()},style:{outline:"none"},type:"submit",value:"Undo",disabled:w||null})))))}}]),t}(s.Component);j.defaultProps={updateDailyData:null,deletePopup:k.a.func};var A=j,O=(a(99),function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(r.a)(this,Object(i.a)(t).call(this))).deletePopup=function(){Object(y.confirmAlert)({title:"Delete last data point",message:"Are you you want to delete the last point?",buttons:[{label:"Yes",onClick:function(){return e.removeLastDataPoint()}},{label:"No",onClick:function(){}}]})},e.getStyles=function(e,t){return{xAxis:{axisLabel:{padding:e,fill:"black"},axis:{padding:100,stroke:"black"},tickLabels:{fill:"black"},ticks:{stroke:"black"}},yAxis:{axisLabel:{padding:t,fill:"black"},axis:{stroke:"black"},tickLabels:{fill:"black"},ticks:{stroke:"black"}},average:{data:{stroke:"#c43a31"}}}},e.removeNoise=function(e,t){for(var a=e.slice(1).map((function(e){return e.y})),n=a.length,l=[0],r=0,i=0;i<n;i+=1)i%t||0===i||(l.push(r/t),r=0),r+=a[i],n%t||i!==n-1?i===n-1&&l.push(r/(n%t)):l.push(r/t);return l},e.stringifyDate=function(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString();return 1===a.length&&(a="0".concat(a)),1===n.length&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},e.setDate=function(t){sessionStorage.setItem("date",t),e.getDailyData(new Date(sessionStorage.getItem("date")))},e.getDailyData=function(t){var a=e.stringifyDate(t);return fetch("https://obscure-river-59718.herokuapp.com/dailygraph",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDate:a})}).then((function(e){return e.json()})).then((function(t){e.setState((function(){return{dailyData:[{x:0,y:0}].concat(t.map((function(e,t){return{x:t+1,y:parseInt(e.catches,10)}})))}}))}))},e.updateDailyData=function(t){var a=e.state.dailyData;t===t&&("true"!==localStorage.getItem("sandbox")?fetch("https://obscure-river-59718.herokuapp.com/dailyupdate",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({catches:t})}).then((function(e){return e.json()})).then((function(t){return e.getDailyData(new Date(sessionStorage.getItem("date"))),t})).then((function(){sessionStorage.setItem("date",new Date),e.setState((function(e){return a.push({x:e.length,y:t}),{dailyData:a}}))})):e.setState((function(e){return a.push({x:e.dailyData.length,y:t}),{dailyData:a}})))},e.createAverageLine=function(t,a){return e.removeNoise(t,a).map((function(e,t){return{x:5*t,y:e}}))},e.calculateAverage=function(e){return(e.reduce((function(e,t){return e+t.y}),0)/(e.length-1)).toFixed(2)},e.removeLastDataPoint=function(){var t=e.state.dailyData;1!==t.length&&("true"===localStorage.getItem("sandbox")&&e.setState((function(){return t.pop(),{dailyData:t}})),fetch("https://obscure-river-59718.herokuapp.com/delete",{method:"delete",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(){e.setState((function(){return t.pop(),{dailyData:t}}))})))},e.state={dailyData:[{x:0,y:0}]},e}return Object(o.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.changeCurrentPath,a=e.location;sessionStorage.getItem("date")&&this.setDate(new Date(sessionStorage.getItem("date"))),t(a.pathname)}},{key:"render",value:function(){var e=this.props,t=e.xPadding,a=e.yPadding,n=this.state.dailyData,l=[];n.length>1&&(l=this.createAverageLine(n,5));var r=new Date(sessionStorage.getItem("date")),i=this.stringifyDate(r),o=1===n.length,s=o?0:this.calculateAverage(n),f=this.getStyles(t,a);return c.a.createElement("div",{className:"mt3 flex justify-center"},c.a.createElement("div",{className:"cont flex justify-center mt2 mb3 pl3 pr3 ba br3 bw1",style:{backgroundColor:"#ECD9BA"}},c.a.createElement("div",{className:"chart mr3 bw1",style:{width:"600px"}},c.a.createElement(u.a,{className:"mt6",theme:d.a.material,domainPadding:{x:[0,30],y:[0,30]}},c.a.createElement(m.a,{text:"Catches ".concat(i),x:180,y:30,textAnchor:"middle"}),c.a.createElement(p.a,{style:f.xAxis,label:"Attempt",fixLabelOverlap:!0}),c.a.createElement(p.a,{style:f.yAxis,dependentAxis:!0,label:"Catches",fixLabelOverlap:!0}),c.a.createElement(m.a,{text:"No data available",x:180,y:180,textAnchor:"middle",style:o?null:{display:"none",zIndex:"100"}}),c.a.createElement(g.a,{data:o?[]:n,animate:{duration:1e3,onLoad:{duration:2e3}}}),c.a.createElement(g.a,{name:"noise",data:l,style:f.average,animate:{duration:1e3,onLoad:{duration:2e3}}}),c.a.createElement(h.a,{name:"points",data:o?[]:n,labels:function(e){var t=e.datum;return"Attempt ".concat(t.x,": ").concat(t.y," catches")},labelComponent:c.a.createElement(b.a,{constrainToVisibleArea:!0}),animate:{duration:1e3,onLoad:{duration:2e3}}}))),c.a.createElement("div",{className:"ml3 mt5",style:{width:"300px"}},c.a.createElement("div",{className:"center"},c.a.createElement("div",{className:"overflow-auto"},c.a.createElement(A,{updateDailyData:this.updateDailyData,deletePopup:this.deletePopup})),c.a.createElement("div",{className:"mt4"},c.a.createElement("h3",null,"Average: ".concat(s))),c.a.createElement("div",{className:"date mt4"},c.a.createElement("h3",null,"Select date:"),c.a.createElement(E,{setDate:this.setDate,date:r}))))))}}]),t}(s.Component));O.defaultProps={changeCurrentPath:null,location:null,xPadding:null,yPadding:null};t.default=Object(f.g)(O)},99:function(e,t,a){}}]);
//# sourceMappingURL=5.8f24f3d0.chunk.js.map