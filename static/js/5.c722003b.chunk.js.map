{"version":3,"sources":["Components/DateSelect/DateSelect.js","Components/DataEntryField/DataEntryField.js","Components/Charts/DailyChart/DailyChart.js"],"names":["DateSelect","date","setDate","className","selected","onChange","newDate","defaultProps","Date","guest","JSON","parse","localStorage","getItem","sandbox","DataEntryField","submitData","event","updateDailyData","props","preventDefault","num","parseInt","target","value","reset","undoData","deletePopup","state","loginState","this","setState","forceUpdate","onSubmit","style","outline","type","placeholder","disabled","onKeyPress","Component","PropTypes","func","DailyChart","confirmAlert","title","message","buttons","label","onClick","removeLastDataPoint","getStyles","xPadding","yPadding","xAxis","axisLabel","padding","fill","axis","stroke","tickLabels","ticks","yAxis","average","data","removeNoise","chunk","catchPoints","slice","map","val","y","length","deletedNoiseArray","acc","i","push","stringifyDate","year","getFullYear","toString","month","getMonth","day","getDate","sessionStorage","setItem","getDailyData","fullDate","fetch","method","headers","body","stringify","then","response","json","dailyData","x","concat","index","catches","res","prevState","createAverageLine","ind","calculateAverage","reduce","toFixed","pop","changeCurrentPath","location","pathname","currentDate","titleDate","isThereData","styles","backgroundColor","width","theme","VictoryTheme","material","domainPadding","text","textAnchor","fixLabelOverlap","dependentAxis","display","zIndex","animate","duration","onLoad","name","labels","datum","labelComponent","constrainToVisibleArea","withRouter"],"mappings":"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","file":"static/js/5.c722003b.chunk.js","sourcesContent":["import React from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\n\r\nconst DateSelect = ({ date, setDate }) => {\r\n  return (\r\n    <div>\r\n      <DatePicker\r\n        className=\"br3 pl2 blue bg-light-gray\"\r\n        selected={date}\r\n        onChange={(newDate) => setDate(newDate)}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nDateSelect.propTypes = {\r\n  // eslint-disable-next-line react/forbid-prop-types\r\n  date: PropTypes.object,\r\n  setDate: PropTypes.func\r\n};\r\n\r\nDateSelect.defaultProps = {\r\n  date: new Date(),\r\n  setDate: null\r\n};\r\n\r\nexport default DateSelect;\r\n","import React, { Component } from 'react';\r\nimport './Input.css';\r\nimport PropTypes from 'prop-types';\r\n\r\n// Get current login state\r\nconst guest = JSON.parse(localStorage.getItem('guest'));\r\nconst sandbox = JSON.parse(localStorage.getItem('sandbox'));\r\n\r\nclass DataEntryField extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      loginState: ''\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update login state once components mount\r\n   */\r\n  componentDidMount() {\r\n    // Set login state based on how user logged in\r\n    if (guest) {\r\n      this.setState({ loginState: '(disabled as guest)' });\r\n    } else if (sandbox) {\r\n      this.setState({ loginState: '(sandbox)' });\r\n    }\r\n\r\n    // UPDATEEE\r\n    this.forceUpdate();\r\n  }\r\n\r\n  /**\r\n   * When add button is pressed, submit data\r\n   *\r\n   * @param {Object} event\r\n   */\r\n  submitData = (event) => {\r\n    const { updateDailyData } = this.props;\r\n\r\n    event.preventDefault(); // Prevent page from refreshing when submitted\r\n\r\n    const num = parseInt(event.target[0].value, 10); // Get value\r\n    event.target.reset(); // Reset field\r\n\r\n    updateDailyData(num);\r\n  };\r\n\r\n  undoData = (event) => {\r\n    const { deletePopup } = this.props;\r\n\r\n    event.preventDefault(); // Prevent page from refreshing when submitted\r\n\r\n    deletePopup();\r\n  };\r\n\r\n  /**\r\n   * Render entry field\r\n   */\r\n  render() {\r\n    const { loginState } = this.state;\r\n\r\n    return (\r\n      // Form\r\n      <div>\r\n        <form onSubmit={this.submitData}>\r\n          <div>\r\n            {/* Input field */}\r\n            <div>\r\n              <input\r\n                className={`f6 mb2 input-reset fl black-80 pa3 lh-solid w-100 w-75-m w-80-l br3 b--black ${\r\n                  guest ? 'bg-moon-gray' : 'bg-white'\r\n                }`}\r\n                style={{ outline: 'none' }}\r\n                type=\"number\"\r\n                placeholder={`Number of catches ${loginState}`}\r\n                disabled={guest || null}\r\n              />\r\n            </div>\r\n\r\n            {/* Submit button */}\r\n            <div>\r\n              <input\r\n                className={`f6 button-reset pv3 tc bn bg-green hover-bg-dark-green white w-50 w-25-m w-20-l br3 ${\r\n                  guest ? null : 'pointer'\r\n                }`}\r\n                style={{ outline: 'none' }}\r\n                type=\"submit\"\r\n                value=\"Add\"\r\n                disabled={guest || null}\r\n              />\r\n            </div>\r\n          </div>\r\n        </form>\r\n\r\n        {/* Undo button */}\r\n        <form onSubmit={this.undoData}>\r\n          <div className=\"mt3\">\r\n            <input\r\n              className={`f6 button-reset pv3 tc bn bg-red hover-bg-dark-red white w-50 w-25-m w-20-l br3 ${\r\n                guest ? null : 'pointer'\r\n              }`}\r\n              // Prevent pressing by enter button just in case\r\n              onKeyPress={(event) => {\r\n                event.preventDefault();\r\n              }}\r\n              style={{ outline: 'none' }}\r\n              type=\"submit\"\r\n              value=\"Undo\"\r\n              disabled={guest || null}\r\n            />\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDataEntryField.propTypes = {\r\n  updateDailyData: PropTypes.func,\r\n  deletePopup: PropTypes.func\r\n};\r\n\r\nDataEntryField.defaultProps = {\r\n  updateDailyData: null,\r\n  deletePopup: PropTypes.func\r\n};\r\n\r\nexport default DataEntryField;\r\n","import React, { Component } from 'react';\r\nimport {\r\n  VictoryTheme,\r\n  VictoryChart,\r\n  VictoryLine,\r\n  VictoryAxis,\r\n  VictoryScatter,\r\n  VictoryLabel,\r\n  VictoryTooltip\r\n} from 'victory';\r\nimport { withRouter } from 'react-router-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { confirmAlert } from 'react-confirm-alert'; // Import\r\nimport 'react-confirm-alert/src/react-confirm-alert.css'; // Import css\r\n\r\nimport DateSelect from '../../DateSelect/DateSelect';\r\nimport DataEntryField from '../../DataEntryField/DataEntryField';\r\nimport '../Chart.css';\r\n\r\nclass DailyChart extends Component {\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      dailyData: [{ x: 0, y: 0 }]\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Update storage and get data when app is opened\r\n   */\r\n  componentDidMount() {\r\n    // Get props\r\n    const { changeCurrentPath, location } = this.props;\r\n\r\n    // Get the current (selected) date and change the graph to that date\r\n    if (sessionStorage.getItem('date')) {\r\n      this.setDate(new Date(sessionStorage.getItem('date')));\r\n    }\r\n\r\n    // Update path\r\n    changeCurrentPath(location.pathname);\r\n  }\r\n\r\n  deletePopup = () => {\r\n    confirmAlert({\r\n      title: 'Delete last data point',\r\n      message: 'Are you you want to delete the last point?',\r\n      buttons: [\r\n        {\r\n          label: 'Yes',\r\n          onClick: () => this.removeLastDataPoint()\r\n        },\r\n        {\r\n          label: 'No',\r\n          onClick: () => {}\r\n        }\r\n      ]\r\n    });\r\n  };\r\n\r\n  /**\r\n   * Returns the styles for the graph\r\n   *\r\n   * @param {Number} xPadding padding for graphs x axis\r\n   * @param {Number} yPadding padding for graphs y axis\r\n   */\r\n  getStyles = (xPadding, yPadding) => {\r\n    return {\r\n      xAxis: {\r\n        axisLabel: { padding: xPadding, fill: 'black' },\r\n        axis: { padding: 100, stroke: 'black' },\r\n        tickLabels: { fill: 'black' },\r\n        ticks: { stroke: 'black' }\r\n      },\r\n      yAxis: {\r\n        axisLabel: { padding: yPadding, fill: 'black' },\r\n        axis: { stroke: 'black' },\r\n        tickLabels: { fill: 'black' },\r\n        ticks: { stroke: 'black' }\r\n      },\r\n      average: {\r\n        data: { stroke: '#c43a31' }\r\n      }\r\n    };\r\n  };\r\n\r\n  /**\r\n   * Removes noise from data by taking average every chunk-sized chunks\r\n   *\r\n   * @param {Array} data daily juggling data\r\n   * @param {Number} chunk used to calculate average catches per chunk size\r\n   */\r\n  removeNoise = (data, chunk) => {\r\n    const catchPoints = data.slice(1).map((val) => val.y); // Isolate catch data\r\n    const { length } = catchPoints;\r\n    const deletedNoiseArray = [0]; // Start with zero\r\n    let acc = 0;\r\n\r\n    // Remove noise\r\n    for (let i = 0; i < length; i += 1) {\r\n      // If chunk size is reached, push in average for that chunk\r\n      // and reset the acc to 0\r\n      if (!(i % chunk) && i !== 0) {\r\n        deletedNoiseArray.push(acc / chunk);\r\n        acc = 0;\r\n      }\r\n\r\n      // Accumulate sum\r\n      acc += catchPoints[i];\r\n\r\n      // If length is divisible by chunk, just push average for chunk size\r\n      if (!(length % chunk) && i === length - 1) {\r\n        deletedNoiseArray.push(acc / chunk);\r\n      }\r\n\r\n      // Else if we are at the last element, just push in average for however much was left\r\n      else if (i === length - 1) {\r\n        deletedNoiseArray.push(acc / (length % chunk));\r\n      }\r\n    }\r\n\r\n    // Return final array\r\n    return deletedNoiseArray;\r\n  };\r\n\r\n  /**\r\n   * Turn date into a string\r\n   *\r\n   * @param {Date} date selected date\r\n   */\r\n  stringifyDate = (date) => {\r\n    // Reformat the date to make it easier to pass into DB/title\r\n    const year = date.getFullYear().toString();\r\n    let month = (date.getMonth() + 1).toString();\r\n    let day = date.getDate().toString();\r\n\r\n    // Add zero to front if Jan-Sept\r\n    if (month.length === 1) {\r\n      month = `0${month}`;\r\n    }\r\n\r\n    // Add zero to front if day 1-9\r\n    if (day.length === 1) {\r\n      day = `0${day}`;\r\n    }\r\n\r\n    // Return full date\r\n    return `${year}-${month}-${day}`;\r\n  };\r\n\r\n  /**\r\n   * Change date to date selected on calendar\r\n   *\r\n   * @param {Date} date selected date\r\n   */\r\n  setDate = (date) => {\r\n    // Set date to selected date\r\n    sessionStorage.setItem('date', date);\r\n\r\n    // Get data for that date\r\n    this.getDailyData(new Date(sessionStorage.getItem('date')));\r\n  };\r\n\r\n  /**\r\n   * Get graph data for a certain day\r\n   *\r\n   * @param {Date} date selected date\r\n   */\r\n  getDailyData = (date) => {\r\n    // Reformat the date to make it easier to pass into DB/title\r\n    const fullDate = this.stringifyDate(date);\r\n\r\n    // Call to backend to get data\r\n    return fetch('https://obscure-river-59718.herokuapp.com/dailygraph', {\r\n      method: 'post', // Can't pass in body if it's a GET\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        newDate: fullDate // Pass in the new date\r\n      })\r\n    })\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        // Change the dailyData to reflect the new date\r\n        this.setState(() => {\r\n          const newData = [{ x: 0, y: 0 }].concat(\r\n            data.map((num, index) => ({\r\n              x: index + 1,\r\n              y: parseInt(num.catches, 10)\r\n            }))\r\n          );\r\n          return { dailyData: newData };\r\n        });\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Update DB/graph when data is input\r\n   *\r\n   * @param {Number} catches number of catches\r\n   */\r\n  updateDailyData = (catches) => {\r\n    const { dailyData } = this.state;\r\n\r\n    // In case user just presses Add without adding a number\r\n    // Checks for NaN cause apparently other ways of checking are unreliable\r\n    // Why.\r\n    // eslint-disable-next-line no-self-compare\r\n    if (catches !== catches) {\r\n      return;\r\n    }\r\n\r\n    // If we are in sandbox, just push to state and don't\r\n    // actually save to DB\r\n    if (localStorage.getItem('sandbox') === 'true') {\r\n      this.setState((prevState) => {\r\n        dailyData.push({\r\n          x: prevState.dailyData.length,\r\n          y: catches\r\n        });\r\n        return { dailyData };\r\n      });\r\n      return;\r\n    }\r\n\r\n    // Add new data to DB\r\n    fetch('https://obscure-river-59718.herokuapp.com/dailyupdate', {\r\n      method: 'post',\r\n      headers: { 'Content-Type': 'application/json' },\r\n      body: JSON.stringify({\r\n        catches\r\n      })\r\n    })\r\n      .then((response) => response.json())\r\n      .then((res) => {\r\n        this.getDailyData(new Date(sessionStorage.getItem('date')));\r\n        return res;\r\n      })\r\n      .then(() => {\r\n        sessionStorage.setItem('date', new Date());\r\n\r\n        this.setState((prevState) => {\r\n          dailyData.push({\r\n            x: prevState.length,\r\n            y: catches\r\n          });\r\n          return { dailyData };\r\n        });\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Create the average line\r\n   *\r\n   * @param {Array} dailyData array of data for the day\r\n   * @param {Number} chunk size of chunk used to remove noise\r\n   */\r\n  createAverageLine = (dailyData, chunk) => {\r\n    return this.removeNoise(dailyData, chunk).map((val, ind) => ({\r\n      x: ind * 5,\r\n      y: val\r\n    }));\r\n  };\r\n\r\n  /**\r\n   * Calculate average catches for entire day\r\n   *\r\n   * @param {Array} dailyData array of data for the day\r\n   */\r\n  calculateAverage = (dailyData) => {\r\n    return (\r\n      dailyData.reduce((acc, val) => acc + val.y, 0) /\r\n      (dailyData.length - 1)\r\n    ).toFixed(2);\r\n  };\r\n\r\n  /**\r\n   * Remove the last data point entered by user\r\n   */\r\n  removeLastDataPoint = () => {\r\n    const { dailyData } = this.state;\r\n\r\n    // If there's no data just return\r\n    if (dailyData.length === 1) {\r\n      return;\r\n    }\r\n\r\n    // If we are in sandbox, just pop and don't\r\n    // actually save to db\r\n    if (localStorage.getItem('sandbox') === 'true') {\r\n      this.setState(() => {\r\n        dailyData.pop();\r\n        return { dailyData };\r\n      });\r\n    }\r\n\r\n    // Delete from db\r\n    fetch('https://obscure-river-59718.herokuapp.com/delete', {\r\n      method: 'delete',\r\n      headers: { 'Content-Type': 'application/json' }\r\n    })\r\n      .then((response) => response.json())\r\n      .then(() => {\r\n        this.setState(() => {\r\n          dailyData.pop();\r\n          return { dailyData };\r\n        });\r\n      });\r\n  };\r\n\r\n  /**\r\n   * Render graph\r\n   */\r\n  render() {\r\n    const { xPadding, yPadding } = this.props; // Padding for charts\r\n    const { dailyData } = this.state;\r\n\r\n    // Data for average line\r\n    let deletedNoiseArray = [];\r\n    const chunk = 5;\r\n\r\n    // Create average line data\r\n    if (dailyData.length > 1) {\r\n      deletedNoiseArray = this.createAverageLine(dailyData, chunk);\r\n    }\r\n\r\n    const currentDate = new Date(sessionStorage.getItem('date')); // Current presented date\r\n\r\n    const titleDate = this.stringifyDate(currentDate); // Date for title\r\n\r\n    const isThereData = dailyData.length === 1; // Is there any data besides the 0\r\n\r\n    // If there is data, calculate the average\r\n    const average = isThereData ? 0 : this.calculateAverage(dailyData); // Average\r\n\r\n    const styles = this.getStyles(xPadding, yPadding); // Chart styles\r\n\r\n    return (\r\n      <div className=\"mt3 flex justify-center\">\r\n        <div\r\n          className=\"cont flex justify-center mt2 mb3 pl3 pr3 ba br3 bw1\"\r\n          style={{ backgroundColor: '#ECD9BA' }}\r\n        >\r\n          <div className=\"chart mr3 bw1\" style={{ width: '600px' }}>\r\n            <VictoryChart\r\n              className=\"mt6\"\r\n              theme={VictoryTheme.material}\r\n              domainPadding={{ x: [0, 30], y: [0, 30] }} // Fix weird cutoff problem sort of\r\n            >\r\n              {/* Title */}\r\n              <VictoryLabel\r\n                text={`Catches ${titleDate}`}\r\n                x={180}\r\n                y={30}\r\n                textAnchor=\"middle\"\r\n              />\r\n\r\n              {/* Axes and labels */}\r\n              <VictoryAxis\r\n                style={styles.xAxis}\r\n                label=\"Attempt\"\r\n                fixLabelOverlap\r\n              />\r\n              <VictoryAxis\r\n                style={styles.yAxis}\r\n                dependentAxis\r\n                label=\"Catches\"\r\n                fixLabelOverlap\r\n              />\r\n\r\n              {/* Displays if there is no data available */}\r\n              <VictoryLabel\r\n                text=\"No data available\"\r\n                x={180}\r\n                y={180}\r\n                textAnchor=\"middle\"\r\n                style={isThereData ? null : { display: 'none', zIndex: '100' }}\r\n              />\r\n\r\n              {/* Line graph */}\r\n              <VictoryLine\r\n                data={isThereData ? [] : dailyData}\r\n                animate={{\r\n                  duration: 1000,\r\n                  onLoad: { duration: 2000 }\r\n                }}\r\n              />\r\n\r\n              {/* Data with noise removed */}\r\n              <VictoryLine\r\n                name=\"noise\"\r\n                data={deletedNoiseArray}\r\n                style={styles.average}\r\n                animate={{\r\n                  duration: 1000,\r\n                  onLoad: { duration: 2000 }\r\n                }}\r\n              />\r\n\r\n              {/* Scatter plot */}\r\n              <VictoryScatter\r\n                name=\"points\"\r\n                data={isThereData ? [] : dailyData}\r\n                labels={({ datum }) => `Attempt ${datum.x}: ${datum.y} catches`} // Component allows hovering over data for information\r\n                labelComponent={<VictoryTooltip constrainToVisibleArea />}\r\n                animate={{\r\n                  duration: 1000,\r\n                  onLoad: { duration: 2000 }\r\n                }}\r\n              />\r\n            </VictoryChart>\r\n          </div>\r\n\r\n          {/* Input field and date selector */}\r\n          <div className=\"ml3 mt5\" style={{ width: '300px' }}>\r\n            <div className=\"center\">\r\n              {/* Enter number field */}\r\n              <div className=\"overflow-auto\">\r\n                <DataEntryField\r\n                  updateDailyData={this.updateDailyData}\r\n                  deletePopup={this.deletePopup}\r\n                />\r\n              </div>\r\n\r\n              <div className=\"mt4\">\r\n                <h3>{`Average: ${average}`}</h3>\r\n              </div>\r\n\r\n              {/* Date picker */}\r\n              <div className=\"date mt4\">\r\n                <h3>Select date:</h3>\r\n                <DateSelect setDate={this.setDate} date={currentDate} />\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nDailyChart.propTypes = {\r\n  changeCurrentPath: PropTypes.func,\r\n  location: PropTypes.object, // eslint-disable-line react/forbid-prop-types\r\n  xPadding: PropTypes.number,\r\n  yPadding: PropTypes.number\r\n};\r\n\r\nDailyChart.defaultProps = {\r\n  changeCurrentPath: null,\r\n  location: null,\r\n  xPadding: null,\r\n  yPadding: null\r\n};\r\n\r\nexport default withRouter(DailyChart);\r\n"],"sourceRoot":""}