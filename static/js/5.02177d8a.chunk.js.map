{"version":3,"sources":["Components/DateSelectAvg.js","Components/DailyAverageChart.js"],"names":["DateSelectAvg","averageDate","setDate","className","selected","onChange","date","dateFormat","showMonthYearPicker","dailyAverageData","DailyAverageChart","getStyles","xPadding","yPadding","xAxis","axisLabel","padding","fill","axis","stroke","tickLabels","ticks","yAxis","average","data","sessionStorage","setItem","getAverageData","Date","getItem","year","getFullYear","toString","month","getMonth","length","selectedMonth","fetch","method","headers","body","JSON","stringify","then","response","json","avgdata","map","dat","x","parseInt","to_char","substring","y","parseFloat","avg","setState","state","this","props","changeCurrentPath","location","pathname","currentDate","dailyAverageDataMonth","styles","style","backgroundColor","theme","VictoryTheme","material","domainPadding","text","textAnchor","label","fixLabelOverlap","dependentAxis","display","zIndex","labels","datum","toFixed","labelComponent","constrainToVisibleArea","animate","duration","onLoad","Component","withRouter"],"mappings":"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","file":"static/js/5.02177d8a.chunk.js","sourcesContent":["import React from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nconst DateSelectAvg = ({ averageDate, setDate }) => {\r\n    return (\r\n        <div >\r\n            <DatePicker\r\n                className='br3 pl2 blue bg-light-gray'\r\n                selected={averageDate}\r\n                onChange={date => setDate(date)}\r\n                dateFormat=\"MM/yyyy\"\r\n                showMonthYearPicker\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default DateSelectAvg;","import React, { Component } from 'react';\r\nimport { VictoryTheme, VictoryChart, VictoryBar, VictoryAxis, VictoryLabel, VictoryTooltip } from 'victory';\r\nimport DateSelectAvg from './DateSelectAvg';\r\nimport { withRouter } from 'react-router-dom';\r\nimport './Chart.css'\r\n\r\nlet dailyAverageData = [];\r\n\r\nclass DailyAverageChart extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            dailyAverageData: dailyAverageData,\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Update storage and get data when app opened\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem('avgdate')) {\r\n            this.setDate(new Date(sessionStorage.getItem('avgdate')));\r\n        }\r\n\r\n        this.props.changeCurrentPath(this.props.location.pathname);\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    render() {\r\n        const { xPadding, yPadding } = this.props;\r\n\r\n        const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'] // Array of month names\r\n\r\n        let currentDate = new Date(sessionStorage.getItem('avgdate'));\r\n\r\n        let dailyAverageDataMonth = months[(currentDate.getMonth())]; // Declare month name var\r\n\r\n        const styles = this.getStyles(xPadding, yPadding);\r\n\r\n        return (\r\n            <div className='mt3 flex justify-center'>\r\n                <div className='cont flex justify-center mt2 mb3 pl3 pr3 ba bw1' style={{ backgroundColor: '#ECD9BA' }}>\r\n                    <div className='chart mr3' style={{ 'width': '600px' }}>\r\n                        {/* Chart */}\r\n                        <VictoryChart\r\n                            theme={VictoryTheme.material}\r\n                            domainPadding={{ x: [50, 30], y: [50, 30] }} // Fix overlapping/cutoff problem\r\n                        >\r\n\r\n                            {/* Title */}\r\n                            <VictoryLabel text={`Average catches ${dailyAverageDataMonth}`} x={180} y={30} textAnchor=\"middle\" />\r\n\r\n                            {/* Axes and labels */}\r\n                            <VictoryAxis\r\n                                style={styles.xAxis}\r\n                                label='Day'\r\n                                fixLabelOverlap\r\n                            />\r\n                            <VictoryAxis\r\n                                style={styles.yAxis}\r\n                                dependentAxis\r\n                                label='Average Catches'\r\n                                fixLabelOverlap\r\n                            />\r\n\r\n                            {/* Displays if there is no data available */}\r\n                            <VictoryLabel\r\n                                text='No data available'\r\n                                x={180}\r\n                                y={180}\r\n                                textAnchor='middle'\r\n                                style={dailyAverageData.length === 0 ? null : { display: 'none', zIndex: '100' }}\r\n                            />\r\n\r\n                            {/* Bar graph */}\r\n                            <VictoryBar\r\n                                data={dailyAverageData}\r\n                                labels={({ datum }) => `${datum.x} average: ${+datum.y.toFixed(2)} catches`}\r\n                                labelComponent={<VictoryTooltip constrainToVisibleArea />}\r\n                                animate={{\r\n                                    duration: 1000,\r\n                                    onLoad: { duration: 0 }\r\n                                }}\r\n                            />\r\n                        </VictoryChart>\r\n                    </div>\r\n\r\n\r\n                    {/* Date picker */}\r\n                    <div className='date ml3 mt5 center' style={{ 'width': '225px' }}>\r\n                        <h3>Select date:</h3>\r\n                        <DateSelectAvg setDate={this.setDate} averageDate={currentDate} />\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    getStyles = (xPadding, yPadding) => {\r\n        return {\r\n            xAxis: {\r\n                axisLabel: { padding: xPadding, fill: 'black' },\r\n                axis: { padding: 100, stroke: 'black' },\r\n                tickLabels: { fill: 'black' },\r\n                ticks: { stroke: 'black' }\r\n            },\r\n            yAxis: {\r\n                axisLabel: { padding: yPadding, fill: 'black' },\r\n                axis: { stroke: 'black' },\r\n                tickLabels: { fill: 'black' },\r\n                ticks: { stroke: 'black' }\r\n            },\r\n            average: {\r\n                data: { stroke: \"#c43a31\" }\r\n            }\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Change date to date selected on calendar\r\n    setDate = (date) => {\r\n        sessionStorage.setItem('avgdate', date);\r\n\r\n        this.getAverageData(new Date(sessionStorage.getItem('avgdate')));\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Get average data graph\r\n    getAverageData = (date) => {\r\n        // Stringify date\r\n        const year = date.getFullYear().toString();\r\n        let month = (date.getMonth() + 1).toString();\r\n\r\n        if (month.length === 1) {\r\n            month = '0' + month;\r\n        }\r\n\r\n        const selectedMonth = year + '-' + month;\r\n\r\n        // Call to backend\r\n        fetch('http://localhost:3000/averagegraph', {\r\n            method: 'post',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                selectedMonth: selectedMonth\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then((avgdata) => {\r\n                dailyAverageData = avgdata.map((dat) => ({ x: parseInt(dat.to_char.substring(8, 10)), y: parseFloat(dat.avg) }));\r\n                this.setState({ dailyAverageData });\r\n            })\r\n    }\r\n}\r\n\r\nexport default withRouter(DailyAverageChart);"],"sourceRoot":""}