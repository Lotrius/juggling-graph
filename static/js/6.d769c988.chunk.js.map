{"version":3,"sources":["Components/DateSelect.js","Components/DataEntryField.js","Components/DailyChart.js"],"names":["DateSelect","date","this","props","selected","onChange","setDate","Component","DataEntryField","submitData","event","preventDefault","num","parseInt","refs","input","value","isNaN","updateDailyData","guest","onSubmit","className","type","placeholder","ref","disabled","dailyData","sessionStorage","setItem","Date","DailyChart","removeNoise","data","chunk","catchPoints","slice","map","val","y","length","deletedNoiseArray","acc","i","push","stringifyDate","year","getFullYear","toString","month","getMonth","day","getDate","getDailyData","getItem","fullDate","fetch","method","headers","body","JSON","stringify","newDate","then","response","json","x","concat","index","catches","setState","res","state","changeCurrentPath","location","pathname","xPadding","yPadding","ind","currentDate","titleDate","style","theme","VictoryTheme","material","domainPadding","containerComponent","labels","datum","voronoiBlacklist","parent","maxWidth","text","textAnchor","axisLabel","padding","axis","label","dependentAxis","animate","duration","onLoad","name","stroke","withRouter"],"mappings":"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","file":"static/js/6.d769c988.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport DatePicker from 'react-datepicker';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\n\r\nclass DateSelect extends Component {\r\n  render() {\r\n    const { date } = this.props;\r\n\r\n    return (\r\n      <div >\r\n        <DatePicker selected={date} onChange={date => this.props.setDate(date)} />\r\n      </div>\r\n\r\n    );\r\n  }\r\n}\r\n\r\nexport default DateSelect;","import React, { Component } from 'react';\r\n\r\nclass DataEntryField extends Component {\r\n    render() {\r\n        const { guest } = this.props;\r\n\r\n        return (\r\n            // Form\r\n            <form onSubmit={this.submitData}>\r\n                <div className=''>\r\n\r\n                    {/* Input field */}\r\n                    <div>\r\n                        <input\r\n                            className={`f6 input-reset fl black-80  pa3 lh-solid w-100 w-75-m w-80-l br2-ns br--left-ns b--black ${guest === 'true' ? 'bg-moon-gray' : 'bg-white'}`}\r\n                            type='text'\r\n                            placeholder='Number of catches'\r\n                            ref=\"input\"\r\n                            disabled={guest === 'true' ? true : null}\r\n                        />\r\n                    </div>\r\n\r\n                    {/* Submit button */}\r\n                    <div>\r\n                        <input\r\n                            className={`f6 button-reset fl pv3 tc bn bg-green hover-bg-green white w-100 w-25-m w-20-l br2-ns br--right-ns ${guest === 'true' ? null : 'pointer'}`}\r\n                            type='submit'\r\n                            value='Add'\r\n                            disabled={this.props.guest === 'true' ? true : null}\r\n                        />\r\n                    </div>\r\n                </div>\r\n            </form>\r\n        );\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // When data is entered into the input field\r\n    submitData = (event) => {\r\n        event.preventDefault(); // Prevent page from refreshing when submitted\r\n\r\n        const num = parseInt(this.refs.input.value, 10); // Get value\r\n\r\n        // If value is actually a number update daily data and clear text field\r\n        // Otherwise just clear text field and nothing else\r\n        if (isNaN(num)) {\r\n            this.refs.input.value = '';\r\n        } else {\r\n            this.refs.input.value = '';\r\n            this.props.updateDailyData(num);\r\n        }\r\n    }\r\n}\r\n\r\nexport default DataEntryField;","import React, { Component } from 'react';\r\nimport { VictoryTheme, VictoryChart, VictoryLine, VictoryAxis, VictoryVoronoiContainer, VictoryScatter, VictoryLabel } from 'victory';\r\nimport DateSelect from '../Components/DateSelect';\r\nimport DataEntryField from './DataEntryField';\r\nimport { withRouter } from 'react-router-dom';\r\n\r\nlet dailyData = [];\r\nsessionStorage.setItem('date', new Date());\r\n\r\nclass DailyChart extends Component {\r\n    constructor() {\r\n        super();\r\n        this.state = {\r\n            dailyData: dailyData,\r\n        }\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Update storage and get data when app opened\r\n    componentDidMount() {\r\n        if (sessionStorage.getItem('date')) {\r\n            this.setDate(new Date(sessionStorage.getItem('date')));\r\n        } \r\n        \r\n        this.props.changeCurrentPath(this.props.location.pathname);\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    render() {\r\n        const { xPadding, yPadding } = this.props; // Padding for charts\r\n\r\n        // Data for average line\r\n        let deletedNoiseArray = [];\r\n        const chunk = 5;\r\n\r\n        // Create average line data\r\n        if (dailyData.length > 1) {\r\n            deletedNoiseArray = this.removeNoise(dailyData, chunk).map((val, ind) => ({ x: (ind) * 5, y: val }));\r\n        }\r\n\r\n        const currentDate = new Date(sessionStorage.getItem('date')); // Current presented date\r\n\r\n        const titleDate = this.stringifyDate(currentDate); // Date for title\r\n\r\n        dailyData = this.state.dailyData; // Current data\r\n\r\n        return (\r\n            <div className='flex justify-center'>\r\n                <div className='mr5' style={{ 'width': '600px' }}>\r\n                    <VictoryChart\r\n                        className='mt6'\r\n                        theme={VictoryTheme.material}\r\n                        domainPadding={{ x: [0, 30], y: [0, 30] }} // Fix weird cutoff problem sort of\r\n\r\n                        // Component allows hovering over data for information\r\n                        containerComponent={\r\n                            <VictoryVoronoiContainer\r\n                                labels={({ datum }) => `Attempt ${datum.x}: ${datum.y} catches`}\r\n                                voronoiBlacklist={['points', 'noise']}\r\n                            />}\r\n\r\n                        style={{ parent: { maxWidth: '200%' } }}\r\n                    >\r\n\r\n                        {/* Title */}\r\n                        <VictoryLabel text={`Catches ${titleDate}`} x={180} y={30} textAnchor=\"middle\" />\r\n\r\n                        {/* Axes and labels */}\r\n                        <VictoryAxis\r\n                            style={{ axisLabel: { padding: xPadding }, axis: { padding: 100 } }}\r\n                            label='Attempt'\r\n                        />\r\n                        <VictoryAxis\r\n                            style={{ axisLabel: { padding: yPadding } }}\r\n                            dependentAxis\r\n                            label='Catches'\r\n                        />\r\n\r\n                        {/* Line graph */}\r\n                        <VictoryLine\r\n                            data={dailyData.length === 1 ? [] : dailyData}\r\n                            animate={{\r\n                                duration: 1000,\r\n                                onLoad: { duration: 2000 }\r\n                            }}\r\n                        />\r\n\r\n                        {/* Data with noise removed */}\r\n                        <VictoryLine\r\n                            name='noise'\r\n                            data={deletedNoiseArray}\r\n                            style={{\r\n                                data: { stroke: \"#c43a31\" }\r\n                            }}\r\n                            animate={{\r\n                                duration: 1000,\r\n                                onLoad: { duration: 2000 }\r\n                            }}\r\n                        />\r\n\r\n                        {/* Scatter plot */}\r\n                        <VictoryScatter\r\n                            name='points'\r\n                            data={dailyData.length === 1 ? [] : dailyData}\r\n                            animate={{\r\n                                duration: 1000,\r\n                                onLoad: { duration: 2000 }\r\n                            }}\r\n                        />\r\n                    </VictoryChart>\r\n                </div>\r\n\r\n                {/* Input field and date selector */}\r\n                <div className='mt5' style={{ 'width': '300px' }}>\r\n                    <div className='center'>\r\n\r\n                        {/* Enter number field */}\r\n                        <div className='mb3 overflow-auto'  >\r\n                            <DataEntryField guest={this.props.guest} updateDailyData={this.updateDailyData} />\r\n                        </div>\r\n\r\n                        {/* Date picker */}\r\n                        <div>\r\n                            <DateSelect setDate={this.setDate} date={currentDate} />\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Removes noise from data by taking average every chunk-sized chunks\r\n    removeNoise = (data, chunk) => {\r\n        const catchPoints = data.slice(1).map((val) => val.y); // Isolate catch data\r\n        const length = catchPoints.length;\r\n        let deletedNoiseArray = [0]; // Start with zero\r\n        let acc = 0;\r\n\r\n        // Remove noise\r\n        for (var i = 0; i < length; i++) {\r\n\r\n            // If chunk size is reached, push in average for that chunk\r\n            // and reset the acc to 0\r\n            if (!(i % chunk) && (i !== 0)) {\r\n                deletedNoiseArray.push(acc / chunk);\r\n                acc = 0;\r\n            }\r\n\r\n            // Accumulate sum\r\n            acc += catchPoints[i];\r\n\r\n            // If we are at the last element, just push in average for however much was left\r\n            if (i === length - 1) {\r\n                deletedNoiseArray.push(acc / (length % chunk));\r\n            }\r\n        }\r\n\r\n        // Return final array\r\n        return deletedNoiseArray;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Turn date into a string\r\n    stringifyDate = (date) => {\r\n        // Reformat the date to make it easier to pass into DB/title\r\n        const year = date.getFullYear().toString();\r\n        let month = (date.getMonth() + 1).toString();\r\n        let day = date.getDate().toString();\r\n\r\n        if (month.length === 1) {\r\n            month = '0' + month;\r\n        }\r\n\r\n        if (day.length === 1) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        return `${year}-${month}-${day}`;\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Change date to date selected on calendar\r\n    setDate = (date) => {\r\n        sessionStorage.setItem('date', date);\r\n        \r\n        this.getDailyData(new Date(sessionStorage.getItem('date')));\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Get graph data for a certain day\r\n    getDailyData = (date) => {\r\n        // Reformat the date to make it easier to pass into DB/title\r\n        const year = date.getFullYear().toString();\r\n        let month = (date.getMonth() + 1).toString();\r\n        let day = date.getDate().toString();\r\n\r\n        if (month.length === 1) {\r\n            month = '0' + month;\r\n        }\r\n\r\n        if (day.length === 1) {\r\n            day = '0' + day;\r\n        }\r\n\r\n        const fullDate = `${year}-${month}-${day}`;\r\n\r\n        // Call to backend to get data\r\n        fetch('https://obscure-river-59718.herokuapp.com/dailygraph', {\r\n            method: 'post', // Can't pass in body if it's a GET\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                newDate: fullDate // Pass in the new date\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then(data => {\r\n                // Change the dailyData to reflect the new date\r\n                // TODO: Don't set up initial dailyData like this. Idea: update DB to include a 0 catch every day\r\n                dailyData = [{ x: 0, y: 0 }].concat(data.map((num, index) => ({ x: index + 1, y: parseInt(num.catches) })));\r\n                this.setState({ dailyData });\r\n            });\r\n    }\r\n\r\n    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////\r\n\r\n    // Update DB/graph when data is input\r\n    updateDailyData = (catches) => {\r\n        fetch('https://obscure-river-59718.herokuapp.com/dailyupdate', {\r\n            method: 'post',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                catches: catches\r\n            })\r\n        })\r\n            .then(response => response.json())\r\n            .then((res) => {\r\n                this.setState({ date: new Date() }, () => this.getDailyData(this.state.date));\r\n                return res;\r\n            })\r\n            .then((res) => {\r\n                // Update the state\r\n                // I COULD call getDailyData but that would just take too much time tbh\r\n                // TODO: Is there a better way to do this? Combine this function and getDailyData somehow?\r\n                dailyData.push({ x: dailyData.length, y: res.catches });\r\n                this.setState({ dailyData });\r\n            });\r\n    }\r\n}\r\n\r\nexport default withRouter(DailyChart);"],"sourceRoot":""}