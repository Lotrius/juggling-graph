(window["webpackJsonpjuggling-graph"]=window["webpackJsonpjuggling-graph"]||[]).push([[4],{231:function(e,t,a){},362:function(e,t,a){"use strict";a.r(t);var n=a(15),r=a(16),l=a(18),i=a(17),c=a(19),s=a(0),o=a.n(s),u=a(358),d=a(364),m=a(363),g=a(367),p=a(359),h=a(361),b=a(369),f=a(6),y=a(121),v=a.n(y),D=(a(136),function(e){var t=e.date,a=e.setDate;return o.a.createElement("div",null,o.a.createElement(v.a,{className:"br3 pl2 blue bg-light-gray",selected:t,onChange:function(e){return a(e)}}))});D.defaultProps={date:new Date,setDate:null};var x=D,E=(a(231),function(e){function t(){var e,a;Object(n.a)(this,t);for(var r=arguments.length,c=new Array(r),s=0;s<r;s++)c[s]=arguments[s];return(a=Object(l.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).submitData=function(e){var t=a.props.updateDailyData;e.preventDefault();var n=parseInt(e.target[0].value,10);e.target.reset(),t(n)},a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=localStorage.getItem("guest"),t="";return"true"===e&&(t="(disabled as guest)"),"true"===localStorage.getItem("sandbox")&&(t="(sandbox)"),o.a.createElement("form",{onSubmit:this.submitData},o.a.createElement("div",{className:""},o.a.createElement("div",null,o.a.createElement("input",{className:"f6 mb2 input-reset fl black-80 pa3 lh-solid w-100 w-75-m w-80-l br3 b--black ".concat("true"===e?"bg-moon-gray":"bg-white"),style:{outline:"none"},type:"number",placeholder:"Number of catches ".concat(t),disabled:"true"===e||null})),o.a.createElement("div",null,o.a.createElement("input",{className:"f6 button-reset pv3 tc bn bg-green hover-bg-green white w-50 w-25-m w-20-l br3 ".concat("true"===e?null:"pointer"),style:{outline:"none"},type:"submit",value:"Add",disabled:"true"===e||null}))))}}]),t}(s.Component));E.defaultProps={updateDailyData:null};var k=E,w=(a(92),function(e){function t(){var e;return Object(n.a)(this,t),(e=Object(l.a)(this,Object(i.a)(t).call(this))).getStyles=function(e,t){return{xAxis:{axisLabel:{padding:e,fill:"black"},axis:{padding:100,stroke:"black"},tickLabels:{fill:"black"},ticks:{stroke:"black"}},yAxis:{axisLabel:{padding:t,fill:"black"},axis:{stroke:"black"},tickLabels:{fill:"black"},ticks:{stroke:"black"}},average:{data:{stroke:"#c43a31"}}}},e.removeNoise=function(e,t){for(var a=e.slice(1).map((function(e){return e.y})),n=a.length,r=[0],l=0,i=0;i<n;i++)i%t||0===i||(r.push(l/t),l=0),l+=a[i],n%t||i!==n-1?i===n-1&&r.push(l/(n%t)):r.push(l/t);return r},e.stringifyDate=function(e){var t=e.getFullYear().toString(),a=(e.getMonth()+1).toString(),n=e.getDate().toString();return 1===a.length&&(a="0".concat(a)),1===n.length&&(n="0".concat(n)),"".concat(t,"-").concat(a,"-").concat(n)},e.setDate=function(t){sessionStorage.setItem("date",t),e.getDailyData(new Date(sessionStorage.getItem("date")))},e.getDailyData=function(t){var a=e.stringifyDate(t);fetch("https://obscure-river-59718.herokuapp.com/dailygraph",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({newDate:a})}).then((function(e){return e.json()})).then((function(t){e.setState((function(e,a){return{dailyData:[{x:0,y:0}].concat(t.map((function(e,t){return{x:t+1,y:parseInt(e.catches,10)}})))}}))}))},e.updateDailyData=function(t){var a=e.state.dailyData;"true"!==localStorage.getItem("sandbox")?fetch("https://obscure-river-59718.herokuapp.com/dailyupdate",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({catches:t})}).then((function(e){return e.json()})).then((function(t){return e.getDailyData(new Date(sessionStorage.getItem("date"))),t})).then((function(n){sessionStorage.setItem("date",new Date),e.setState((function(e,n){return a.push({x:e.length,y:t}),{dailyData:a}}))})):e.setState((function(e,n){return a.push({x:e.length,y:t}),{dailyData:a}}))},e.createAverageLine=function(t,a){return e.removeNoise(t,a).map((function(e,t){return{x:5*t,y:e}}))},e.calculateAverage=function(e){return(e.reduce((function(e,t){return e+t.y}),0)/(e.length-1)).toFixed(2)},e.state={dailyData:[]},e}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.changeCurrentPath,a=e.location;sessionStorage.getItem("date")&&this.setDate(new Date(sessionStorage.getItem("date"))),t(a.pathname)}},{key:"render",value:function(){var e=this.props,t=e.xPadding,a=e.yPadding,n=this.state.dailyData,r=[];n.length>1&&(r=this.createAverageLine(n,5));var l=new Date(sessionStorage.getItem("date")),i=this.stringifyDate(l),c=1===n.length,s=c?0:this.calculateAverage(n),f=this.getStyles(t,a);return o.a.createElement("div",{className:"mt3 flex justify-center"},o.a.createElement("div",{className:"cont flex justify-center mt2 mb3 pl3 pr3 ba br3 bw1",style:{backgroundColor:"#ECD9BA"}},o.a.createElement("div",{className:"chart mr3 bw1",style:{width:"600px"}},o.a.createElement(u.a,{className:"mt6",theme:d.a.material,domainPadding:{x:[0,30],y:[0,30]}},o.a.createElement(m.a,{text:"Catches ".concat(i),x:180,y:30,textAnchor:"middle"}),o.a.createElement(g.a,{style:f.xAxis,label:"Attempt",fixLabelOverlap:!0}),o.a.createElement(g.a,{style:f.yAxis,dependentAxis:!0,label:"Catches",fixLabelOverlap:!0}),o.a.createElement(m.a,{text:"No data available",x:180,y:180,textAnchor:"middle",style:c?null:{display:"none",zIndex:"100"}}),o.a.createElement(p.a,{data:c?[]:n,animate:{duration:1e3,onLoad:{duration:2e3}}}),o.a.createElement(p.a,{name:"noise",data:r,style:f.average,animate:{duration:1e3,onLoad:{duration:2e3}}}),o.a.createElement(h.a,{name:"points",data:c?[]:n,labels:function(e){var t=e.datum;return"Attempt ".concat(t.x,": ").concat(t.y," catches")},labelComponent:o.a.createElement(b.a,{constrainToVisibleArea:!0}),animate:{duration:1e3,onLoad:{duration:2e3}}}))),o.a.createElement("div",{className:"ml3 mt5",style:{width:"300px"}},o.a.createElement("div",{className:"center"},o.a.createElement("div",{className:"overflow-auto"},o.a.createElement(k,{updateDailyData:this.updateDailyData})),o.a.createElement("div",{className:"mt4"},o.a.createElement("h3",null,"Average: ".concat(s))),o.a.createElement("div",{className:"date mt4"},o.a.createElement("h3",null,"Select date:"),o.a.createElement(x,{setDate:this.setDate,date:l}))))))}}]),t}(s.Component));w.defaultProps={changeCurrentPath:null,location:null,xPadding:null,yPadding:null};t.default=Object(f.g)(w)},92:function(e,t,a){}}]);
//# sourceMappingURL=4.427be6c3.chunk.js.map